<!DOCTYPE html><html><head><meta charset="utf-8"/>
<title>tomato 1.2.4 Reference Manual</title>
<link rel='stylesheet' type='text/css' href='assets/ruff-min.css' />
<script type='text/javascript' src='assets/ruff-min.js'></script>
</head>
<body>
<div class='ruff-layout'>
<header class='ruff-layout-header ruff-hd'>
<a style='text-decoration:none;' href='tomato.html'>tomato 1.2.4 Reference Manual</a>


            <div id="ruffButtonBar">
            <button id="ruffNavMove" onclick="ruffMoveNavPane()"></button>
            <button id="ruffToggleTheme" onclick="ruffNextTheme()"></button>
            </div>
        </header><main class='ruff-layout-main ruff-bd'><h1 class='ruff'><a name='::tomato::mathquat'></a>::tomato::mathquat<span class='ruff-uplink'><a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h1>
<div style='clear:both;'></div>
<p class='ruff'>A Class representing a Quaternion</p>
<h2 class='ruff'><a name='::tomato::mathquat-Classes'></a>Classes<span class='ruff-uplink'><a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h2>
<div style='clear:both;'></div>
<h3 class='ruffclass'><a name='::tomato::mathquat::Quaternion'>Quaternion</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat" title="::tomato::mathquat" class='ruff_cmd'>::tomato::mathquat</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<h5 class='ruff'>Method summary</h5><table class='ruff_deflist'>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::constructor" title="constructor" class='ruff_cmd'>constructor</a></nobr></td><td>Constructor for the class.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::!=" title="!=" class='ruff_cmd'>!=</a></nobr></td><td>Inequality operator for two quaternions if <code>$obj</code> is quaternion component.<br> Inequality operator for quaternion and double if <code>$obj</code> is double.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::*" title="*" class='ruff_cmd'>*</a></nobr></td><td>Multiply a floating point number with a quaternion, if <code>$obj</code> is double.<br> Or multiply a quaternion with a quaternion, if <code>$obj</code> is an Quaternion object.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::+" title="+" class='ruff_cmd'>+</a></nobr></td><td>Add a floating point number to a quaternion, if <code>$obj</code> is double or add a quaternion to a quaternion, if <code>$obj</code> is an Quaternion object.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::-" title="-" class='ruff_cmd'>-</a></nobr></td><td>Subtract a floating point number from a quaternion, if <code>$obj</code> is double.<br> Or subtract a quaternion from a quaternion, if <code>$obj</code> is an Quaternion object.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::/" title="/" class='ruff_cmd'>/</a></nobr></td><td>Divide a quaternion by a floating point number, if <code>$obj</code> is double.<br> Or divide a quaternion by a quaternion, if <code>$obj</code> is an Quaternion object.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::==" title="==" class='ruff_cmd'>==</a></nobr></td><td>Equality operator for two quaternions if <code>$obj</code> is quaternion component.<br> Equality operator for quaternion and double if <code>$obj</code> is double.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::^" title="^" class='ruff_cmd'>^</a></nobr></td><td>Raise a quaternion to a floating point number.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Angle" title="Angle" class='ruff_cmd'>Angle</a></nobr></td><td>Gets the angle (in radians) describing the magnitude of the quaternion rotation about it's rotation axis.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Arg" title="Arg" class='ruff_cmd'>Arg</a></nobr></td><td>Gets the argument <code>phi = arg(q)</code> of the quaternion <code>q</code>, such that <code>q = r*(cos(phi) + u*sin(phi)) = r*exp(phi*u)</code><br> where <code>r</code> is the absolute and <code>u</code> the unit vector of <code>q</code>.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Conjugate" title="Conjugate" class='ruff_cmd'>Conjugate</a></nobr></td><td>Conjugate this quaternion.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Distance" title="Distance" class='ruff_cmd'>Distance</a></nobr></td><td>Gets the distance |a-b| of two quaternions, forming a metric space.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Exp" title="Exp" class='ruff_cmd'>Exp</a></nobr></td><td>Exponential Function.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Get" title="Get" class='ruff_cmd'>Get</a></nobr></td><td>Gets values from the Quaternion Class under Tcl list form.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::GetType" title="GetType" class='ruff_cmd'>GetType</a></nobr></td><td>Gets the name of class.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::ImagX" title="ImagX" class='ruff_cmd'>ImagX</a></nobr></td><td>Gets the imaginary X part (coefficient of complex I) of the quaternion.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::ImagY" title="ImagY" class='ruff_cmd'>ImagY</a></nobr></td><td>Gets the imaginary Y part (coefficient of complex J) of the quaternion.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::ImagZ" title="ImagZ" class='ruff_cmd'>ImagZ</a></nobr></td><td>Gets the imaginary Z part (coefficient of complex K) of the quaternion.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Inversed" title="Inversed" class='ruff_cmd'>Inversed</a></nobr></td><td>Gets an inverted quaternion. Inversing Zero returns Zero</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::IsInfinity" title="IsInfinity" class='ruff_cmd'>IsInfinity</a></nobr></td><td>Gets a value indicating whether the quaternion is not a number</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::IsNan" title="IsNan" class='ruff_cmd'>IsNan</a></nobr></td><td>Gets a value indicating whether the quaternion is not a number</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::IsUnitQuaternion" title="IsUnitQuaternion" class='ruff_cmd'>IsUnitQuaternion</a></nobr></td><td>Gets a value indicating whether the quaternion q has length |q| = 1. To normalize a quaternion to a length of 1, use the <a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Normalized" title="Normalized" class='ruff_cmd'>Normalized</a> method. All unit quaternions form a 3-sphere.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Log" title="Log" class='ruff_cmd'>Log</a></nobr></td><td>Logarithm to a given base.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Log10" title="Log10" class='ruff_cmd'>Log10</a></nobr></td><td>Common Logarithm to base 10.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Negate" title="Negate" class='ruff_cmd'>Negate</a></nobr></td><td>Negate a quaternion.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Norm" title="Norm" class='ruff_cmd'>Norm</a></nobr></td><td>Gets the norm of the quaternion q: square root of the sum of the squares of the four components.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Normalized" title="Normalized" class='ruff_cmd'>Normalized</a></nobr></td><td>Gets a new normalized Quaternion <code>q</code> with the direction of this quaternion.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::NormalizedVector" title="NormalizedVector" class='ruff_cmd'>NormalizedVector</a></nobr></td><td>Gets a new normalized Quaternion <code>u</code> with the Vector part only, such that <code>||u|| = 1</code>.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::NormSquared" title="NormSquared" class='ruff_cmd'>NormSquared</a></nobr></td><td>Gets the sum of the squares of the four components.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Real" title="Real" class='ruff_cmd'>Real</a></nobr></td><td>Gets the real part of the quaternion.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Rotate" title="Rotate" class='ruff_cmd'>Rotate</a></nobr></td><td>Rotate a 3D vector or 3D point by the rotation stored in the Quaternion object</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::RotateRotationQuaternion" title="RotateRotationQuaternion" class='ruff_cmd'>RotateRotationQuaternion</a></nobr></td><td>Rotates the provided rotation quaternion with this quaternion.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::RotateUnitQuaternion" title="RotateUnitQuaternion" class='ruff_cmd'>RotateUnitQuaternion</a></nobr></td><td>Rotates the provided unit quaternion with this quaternion.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Scalar" title="Scalar" class='ruff_cmd'>Scalar</a></nobr></td><td>Gets a new Quaternion <code>q</code> with the Scalar part only.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Sqrt" title="Sqrt" class='ruff_cmd'>Sqrt</a></nobr></td><td>Square root of the Quaternion: q^(1/2).</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::ToString" title="ToString" class='ruff_cmd'>ToString</a></nobr></td><td>Returns a string representation of this object.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::ToVector3D" title="ToVector3D" class='ruff_cmd'>ToVector3D</a></nobr></td><td>Gets the Vector part only.</td></tr>
<tr><td><nobr><a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Vector" title="Vector" class='ruff_cmd'>Vector</a></nobr></td><td>Gets a new Quaternion <code>q</code> with the Vector part only.</td></tr>
</table>
<h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::constructor'>constructor</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Initializes a new Quaternion Class.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>Quaternion create OBJNAME</span> <span class='ruff_arg'>?args?</span><br><span class='ruff_cmd'>Quaternion new</span> <span class='ruff_arg'>?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><nobr><code>args</code></nobr></td><td>Options described below.</td></tr>
<tr><td><nobr><code>component1</code></nobr></td><td>-scalar &amp; -vector</td></tr>
<tr><td><nobr><code>component2</code></nobr></td><td>-axis &amp; -angle</td></tr>
<tr><td><nobr><code>list</code></nobr></td><td>A list of 4 elements</td></tr>
<tr><td><nobr><code>no values</code></nobr></td><td>default to <code>Quaternion(1 +0i +0j +0k)</code>.</td></tr>
<tr><td><nobr><code>scalar</code></nobr></td><td>A scalar value</td></tr>
<tr><td><nobr><code>values</code></nobr></td><td>3 values or 4 values</td></tr>
<tr><td><nobr><code>vector</code></nobr></td><td>A Vector3d Class <a href="tomato-tomato-mathvec3d.html#::tomato::mathvec3d::Vector3d" title="mathvec3d::Vector3d" class='ruff_cmd'>mathvec3d::Vector3d</a></td></tr>
</table>
<h5 class='ruff'>Description</h5><ul class='ruff'>
<li>Create a quaternion by specifying a list of 4 real-numbered scalar elements.<br></li>
</ul>

<figure  class='ruff-snippet ruff-figure'><pre class='ruff'>
tomato::mathquat::Quaternion new {1 2 3 4}
&gt; (1 + 2i + 3j + 4k)
</pre>

</figure><ul class='ruff'>
<li>Create a quaternion by specifying a Vector3d Class.<br></li>
</ul>

<figure  class='ruff-snippet ruff-figure'><pre class='ruff'>
tomato::mathquat::Quaternion new <span style="color: rgb(233, 98, 98);">$vectorobj</span>
&gt; (0 + xi + yj + zk)
</pre>

</figure><ul class='ruff'>
<li>Create the quaternion representation of a scalar (single real number) value.<br></li>
</ul>

<figure  class='ruff-snippet ruff-figure'><pre class='ruff'>
tomato::mathquat::Quaternion new <span style="color: hsl(120, 71%, 16%);">&quot;2&quot;</span>
The imaginary part of the resulting quaternion will always be 0i + 0j + 0k.
&gt; (2 + 0i + 0j + 0k)
</pre>

</figure><ul class='ruff'>
<li>Create a quaternion by specifying 3 real-numbered scalar elements.<br></li>
</ul>

<figure  class='ruff-snippet ruff-figure'><pre class='ruff'>
tomato::mathquat::Quaternion new 1 2 3
&gt; (0 + 1i + 2j + 3k)
</pre>

</figure><ul class='ruff'>
<li>Create a quaternion by specifying 4 real-numbered scalar elements.<br></li>
</ul>

<figure  class='ruff-snippet ruff-figure'><pre class='ruff'>
tomato::mathquat::Quaternion new 1 1 1 1
&gt; (1 + 1i + 1j + 1k)
</pre>

</figure><ul class='ruff'>
<li>Create a quaternion by specifying a scalar and a vector.<br> The scalar (real) and vector (imaginary) parts of the desired quaternion.<br></li>
</ul>
<table class='ruff_deflist'>
<tr><td><nobr>-vector</nobr></td><td>Can be a Vector3d class <a href="tomato-tomato-mathvec3d.html#::tomato::mathvec3d::Vector3d" title="mathvec3d::Vector3d" class='ruff_cmd'>mathvec3d::Vector3d</a> or list of 3 values</td></tr>
</table>

<figure  class='ruff-snippet ruff-figure'><pre class='ruff'>
tomato::mathquat::Quaternion new -scalar 1 -vector {1 1 1}
&gt; (1 + 1i + 1j + 1k)
</pre>

</figure><ul class='ruff'>
<li>Create a quaternion by specifying a axis and a angle in degrees.<br> Specify the angle (degrees) for a rotation about an axis vector [x, y, z] to be described by the quaternion object<br></li>
</ul>
<table class='ruff_deflist'>
<tr><td><nobr>-axis</nobr></td><td>Can be a Vector3d class <a href="tomato-tomato-mathvec3d.html#::tomato::mathvec3d::Vector3d" title="mathvec3d::Vector3d" class='ruff_cmd'>mathvec3d::Vector3d</a> or list of 3 values</td></tr>
</table>

<figure  class='ruff-snippet ruff-figure'><pre class='ruff'>
tomato::mathquat::Quaternion new -axis {0 1 0} -angle 90
&gt; (0.707 +0i +0.707j +0k)
</pre>

</figure><ul class='ruff'>
<li>Default value :</li>
</ul>

<figure  class='ruff-snippet ruff-figure'><pre class='ruff'>
tomato::mathquat::Quaternion new
&gt; (1 +0i +0j +0k)
</pre>

</figure><p class='ruff'>An error exception is raised if <code>args</code> is not the one desired.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_constructor' href="javascript:toggleSource('tomato_mathquat_Quaternion_constructor')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_constructor' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> constructor {args} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Initializes a new Quaternion Class.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # args - Options described below.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # list       - A list of 4 elements</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # vector     - A Vector3d Class [mathvec3d::Vector3d]</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # scalar     - A scalar value</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # values     - 3 values or 4 values</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # component1 - -scalar &amp; -vector</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # component2 - -axis &amp; -angle</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # no values  - default to `Quaternion(1 +0i +0j +0k)`.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>

    if {[llength <span style="color: rgb(233, 98, 98);">$args</span>] == 1} {

        if {[llength {*}<span style="color: rgb(233, 98, 98);">$args</span>] == 4} {
            #ruff
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">            # * Create a quaternion by specifying a list of 4 real-numbered scalar elements.&lt;br&gt;</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">            # ```</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">            # tomato::mathquat::Quaternion new {1 2 3 4}</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">            # &gt; (1 + 2i + 3j + 4k)</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">            # ```</span>
            lassign {*}<span style="color: rgb(233, 98, 98);">$args</span> w x y z
            <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _w <span style="color: rgb(233, 98, 98);">$w</span>
            <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _x <span style="color: rgb(233, 98, 98);">$x</span>
            <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _y <span style="color: rgb(233, 98, 98);">$y</span>
            <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _z <span style="color: rgb(233, 98, 98);">$z</span>

        } elseif {[tomato::helper::TypeOf <span style="color: rgb(233, 98, 98);">$args</span> Isa <span style="color: hsl(120, 71%, 16%);">&quot;Vector3d&quot;</span>]} {
            #ruff
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">            # * Create a quaternion by specifying a Vector3d Class.&lt;br&gt;</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">            # ```</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">            # tomato::mathquat::Quaternion new <span style="color: rgb(233, 98, 98);">$vectorobj</span></span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">            # &gt; (0 + xi + yj + zk)</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">            # ```</span>
            lassign [<span style="color: rgb(233, 98, 98);">$args</span> Get] x y z
            <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _w 0
            <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _x <span style="color: rgb(233, 98, 98);">$x</span>
            <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _y <span style="color: rgb(233, 98, 98);">$y</span>
            <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _z <span style="color: rgb(233, 98, 98);">$z</span>

        } elseif {[tomato::mathquat::_checkvalue <span style="color: rgb(233, 98, 98);">$args</span>]} {
            #ruff
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">            # * Create the quaternion representation of a scalar (single real number) value.&lt;br&gt;</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">            # ```</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">            # tomato::mathquat::Quaternion new <span style="color: hsl(120, 71%, 16%);">&quot;2&quot;</span></span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">            # The imaginary part of the resulting quaternion will always be 0i + 0j + 0k.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">            # &gt; (2 + 0i + 0j + 0k)</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">            # ```</span>
            <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _w <span style="color: rgb(233, 98, 98);">$args</span>
            <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _x 0
            <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _y 0
            <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _z 0

        } else {
            <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">error</span> <span style="color: hsl(120, 71%, 16%);">&quot;arg must be a Vector3d, one scalar value, or 4 values ...&quot;</span>
        }

    } elseif {[llength <span style="color: rgb(233, 98, 98);">$args</span>] == 3} {
        #ruff
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">        # * Create a quaternion by specifying 3 real-numbered scalar elements.&lt;br&gt;</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">        # ```</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">        # tomato::mathquat::Quaternion new 1 2 3</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">        # &gt; (0 + 1i + 2j + 3k)</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">        # ```</span>
        lassign <span style="color: rgb(233, 98, 98);">$args</span> x y z
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _w 0
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _x <span style="color: rgb(233, 98, 98);">$x</span>
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _y <span style="color: rgb(233, 98, 98);">$y</span>
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _z <span style="color: rgb(233, 98, 98);">$z</span>

    } elseif {[llength <span style="color: rgb(233, 98, 98);">$args</span>] == 4} {

        if {[tomato::mathquat::_checkvalue <span style="color: rgb(233, 98, 98);">$args</span>]} {
            #ruff
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">            # * Create a quaternion by specifying 4 real-numbered scalar elements.&lt;br&gt;</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">            # ```</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">            # tomato::mathquat::Quaternion new 1 1 1 1</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">            # &gt; (1 + 1i + 1j + 1k)</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">            # ```</span>
            lassign <span style="color: rgb(233, 98, 98);">$args</span> w x y z
            <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _w <span style="color: rgb(233, 98, 98);">$w</span>
            <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _x <span style="color: rgb(233, 98, 98);">$x</span>
            <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _y <span style="color: rgb(233, 98, 98);">$y</span>
            <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _z <span style="color: rgb(233, 98, 98);">$z</span>

        } else {

            if {[string match <span style="color: hsl(120, 71%, 16%);">&quot;*-scalar*&quot; <span style="color: rgb(233, 98, 98);">$args</span>] &amp;&amp; ![string match &quot;*-vector*&quot;</span> <span style="color: rgb(233, 98, 98);">$args</span>]} {
                #ruff
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">                # * Create a quaternion by specifying a scalar and a vector.&lt;br&gt;</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">                # The scalar (real) and vector (imaginary) parts of the desired quaternion.&lt;br&gt;</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">                # -vector - Can be a Vector3d class [mathvec3d::Vector3d] or list of 3 values</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">                # ```</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">                # tomato::mathquat::Quaternion new -scalar 1 -vector {1 1 1}</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">                # &gt; (1 + 1i + 1j + 1k)</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">                # ```</span>
                <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">error</span> <span style="color: hsl(120, 71%, 16%);">&quot;Key 'scalar' must be associated with 'vector'&quot;</span>
            }

            if {[string match <span style="color: hsl(120, 71%, 16%);">&quot;*-axis*&quot; <span style="color: rgb(233, 98, 98);">$args</span>] &amp;&amp; ![string match &quot;*-angle*&quot;</span> <span style="color: rgb(233, 98, 98);">$args</span>]} {
                #ruff
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">                # * Create a quaternion by specifying a axis and a angle in degrees.&lt;br&gt;</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">                # Specify the angle (degrees) for a rotation about an axis vector \[x, y, z] to be described by the quaternion object&lt;br&gt;</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">                # -axis - Can be a Vector3d class [mathvec3d::Vector3d] or list of 3 values</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">                # ```</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">                # tomato::mathquat::Quaternion new -axis {0 1 0} -angle 90</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">                # &gt; (0.707 +0i +0.707j +0k)</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">                # ```</span>
                <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">error</span> <span style="color: hsl(120, 71%, 16%);">&quot;Key 'axis' must be associated with 'angle'&quot;</span>
            }

            <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> options [dict create]

            foreach {key value} <span style="color: rgb(233, 98, 98);">$args</span> {

                if {<span style="color: rgb(233, 98, 98);">$value</span> eq &quot;&quot;} {
                    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">error</span> <span style="color: hsl(120, 71%, 16%);">&quot;No value specified for key '<span style="color: rgb(233, 98, 98);">$key</span>'&quot;</span>
                }

                switch -exact -- <span style="color: rgb(233, 98, 98);">$key</span> {
                    <span style="color: hsl(120, 71%, 16%);">&quot;-scalar&quot;</span> {dict <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> options Scalar <span style="color: rgb(233, 98, 98);">$value</span>}
                    <span style="color: hsl(120, 71%, 16%);">&quot;-axis&quot;</span> -
                    <span style="color: hsl(120, 71%, 16%);">&quot;-vector&quot;</span> {
                                if {[tomato::helper::TypeOf <span style="color: rgb(233, 98, 98);">$value</span> Isa <span style="color: hsl(120, 71%, 16%);">&quot;Vector3d&quot;</span>]} {
                                    dict <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> options Vector <span style="color: rgb(233, 98, 98);">$value</span>
                                } elseif {[string is list <span style="color: rgb(233, 98, 98);">$value</span>] &amp;&amp; [llength <span style="color: rgb(233, 98, 98);">$value</span>] == 3} {
                                    dict <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> options Vector [tomato::mathvec3d::Vector3d new <span style="color: rgb(233, 98, 98);">$value</span>]
                                } else {
                                    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">error</span> <span style="color: hsl(120, 71%, 16%);">&quot;Value for Key '<span style="color: rgb(233, 98, 98);">$key</span>' must be an Class Vector3d or a list of 3 elements...&quot;</span>
                                }
                              }
                    <span style="color: hsl(120, 71%, 16%);">&quot;-angle&quot;</span> {dict <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> options Angle <span style="color: rgb(233, 98, 98);">$value</span>}
                    default  {<span style="color: rgba(8, 23, 241, 1);font-weight: 550;">error</span> <span style="color: hsl(120, 71%, 16%);">&quot;Unknown key '<span style="color: rgb(233, 98, 98);">$key</span>' specified&quot;</span>}

                }

            }

            if {[dict exists <span style="color: rgb(233, 98, 98);">$options</span> Vector] &amp;&amp; [dict exists <span style="color: rgb(233, 98, 98);">$options</span> Angle]} {
                lassign [tomato::mathquat::_init_from_vector_angle [dict get <span style="color: rgb(233, 98, 98);">$options</span> Vector]  [dict get <span style="color: rgb(233, 98, 98);">$options</span> Angle]] w x y z

                <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _w <span style="color: rgb(233, 98, 98);">$w</span> ; <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _x <span style="color: rgb(233, 98, 98);">$x</span> ; <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _y <span style="color: rgb(233, 98, 98);">$y</span> ; <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _z <span style="color: rgb(233, 98, 98);">$z</span>

            } elseif {[dict exists <span style="color: rgb(233, 98, 98);">$options</span> Scalar] &amp;&amp; [dict exists <span style="color: rgb(233, 98, 98);">$options</span> Vector]} {

                lassign [[dict get <span style="color: rgb(233, 98, 98);">$options</span> Vector] Get] x y z

                <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _w [dict get <span style="color: rgb(233, 98, 98);">$options</span> Scalar] ; <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _x <span style="color: rgb(233, 98, 98);">$x</span> ; <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _y <span style="color: rgb(233, 98, 98);">$y</span> ; <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _z <span style="color: rgb(233, 98, 98);">$z</span>
            }


        }

    } elseif {[llength <span style="color: rgb(233, 98, 98);">$args</span>] == 0} {
        #ruff
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">        # * Default value :</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">        # ```</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">        # tomato::mathquat::Quaternion new</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">        # &gt; (1 +0i +0j +0k)</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">        # ```</span>
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _w 1
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _x 0
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _y 0
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> _z 0
    } else {
        #ruff
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">        # An <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">error</span> exception is raised if `args` is not the one desired.</span>
        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">error</span> <span style="color: hsl(120, 71%, 16%);">&quot;The argument does not match the requested values, please refer to the documentation...&quot;</span>
    }
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::!='>!=</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Inequality operator for two quaternions if <code>$obj</code> is quaternion component.<br> Inequality operator for quaternion and double if <code>$obj</code> is double.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ !=</span> <span class='ruff_arg'>obj ?tolerance?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><nobr><code>obj</code></nobr></td><td>Options described below.</td></tr>
<tr><td><nobr><code>tolerance</code></nobr></td><td>A tolerance (epsilon) to adjust for floating point error. Optional, default <code>$::tomato::helper::TolEquals</code>.</td></tr>
<tr><td><nobr><code>object</code></nobr></td><td>A Quaternion component.</td></tr>
<tr><td><nobr><code>scalar</code></nobr></td><td>A double value.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns <code>True</code> if the quaternions are not the same if <code>$obj</code> is a quaternion or True if the real part of the quaternion is not equal to the double and the rest of the quaternion is almost 0. Otherwise <code>False</code>.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion__=' href="javascript:toggleSource('tomato_mathquat_Quaternion__=')">Show source</a></p>
<div id='tomato_mathquat_Quaternion__=' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> != {obj {tolerance {<span style="color: rgb(233, 98, 98);">$::tomato::helper::TolEquals</span>}}} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Inequality operator for two quaternions if <span style="color: rgb(233, 98, 98);">$obj</span> is quaternion component.&lt;br&gt;</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Inequality operator for quaternion and double if <span style="color: rgb(233, 98, 98);">$obj</span> is double.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # obj - Options described below.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # scalar    - A double value.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # object    - A Quaternion component.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # tolerance - A tolerance (epsilon) to adjust for floating point error.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns `True` if the quaternions are not the same if <span style="color: rgb(233, 98, 98);">$obj</span> is a quaternion or</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # True if the real part of the quaternion is not equal to the double and the rest of the quaternion is almost 0. Otherwise `False`.</span>
    if {[llength [info level 0]] &lt; 4} {
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> tolerance <span style="color: rgb(233, 98, 98);">$::tomato::helper::TolEquals</span>
    }

    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [expr {![my == <span style="color: rgb(233, 98, 98);">$obj</span> <span style="color: rgb(233, 98, 98);">$tolerance</span>]}]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::*'>*</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Multiply a floating point number with a quaternion, if <code>$obj</code> is double.<br> Or multiply a quaternion with a quaternion, if <code>$obj</code> is an Quaternion object.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ *</span> <span class='ruff_arg'>obj</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><nobr><code>obj</code></nobr></td><td>Options described below.</td></tr>
<tr><td><nobr><code>object</code></nobr></td><td>A Quaternion component.</td></tr>
<tr><td><nobr><code>scalar</code></nobr></td><td>A double value.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns A new quaternion <a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="Quaternion" class='ruff_cmd'>Quaternion</a>.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_*' href="javascript:toggleSource('tomato_mathquat_Quaternion_*')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_*' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> * {obj} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Multiply a floating point number with a quaternion, if <span style="color: rgb(233, 98, 98);">$obj</span> is double.&lt;br&gt;</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Or multiply a quaternion with a quaternion, if <span style="color: rgb(233, 98, 98);">$obj</span> is an Quaternion object.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # obj - Options described below.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # scalar - A double value.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # object - A Quaternion component.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns A new quaternion [Quaternion].</span>
    if {[string is double <span style="color: rgb(233, 98, 98);">$obj</span>]} {
        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathquat::Quaternion new [expr {<span style="color: rgb(233, 98, 98);">$_w</span> * <span style="color: rgb(233, 98, 98);">$obj</span>}]  [expr {<span style="color: rgb(233, 98, 98);">$_x</span> * <span style="color: rgb(233, 98, 98);">$obj</span>}]  [expr {<span style="color: rgb(233, 98, 98);">$_y</span> * <span style="color: rgb(233, 98, 98);">$obj</span>}]  [expr {<span style="color: rgb(233, 98, 98);">$_z</span> * <span style="color: rgb(233, 98, 98);">$obj</span>}]]
    }

    if {[tomato::helper::TypeOf <span style="color: rgb(233, 98, 98);">$obj</span> Isa <span style="color: hsl(120, 71%, 16%);">&quot;Quaternion&quot;</span>]} {

        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> ci [expr {(<span style="color: rgb(233, 98, 98);">$_x</span>      * [<span style="color: rgb(233, 98, 98);">$obj</span> Real])  + (<span style="color: rgb(233, 98, 98);">$_y</span> * [<span style="color: rgb(233, 98, 98);">$obj</span> ImagZ]) - (<span style="color: rgb(233, 98, 98);">$_z</span> * [<span style="color: rgb(233, 98, 98);">$obj</span> ImagY]) + (<span style="color: rgb(233, 98, 98);">$_w</span> * [<span style="color: rgb(233, 98, 98);">$obj</span> ImagX])}]
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> cj [expr {(Inv(<span style="color: rgb(233, 98, 98);">$_x</span>) * [<span style="color: rgb(233, 98, 98);">$obj</span> ImagZ]) + (<span style="color: rgb(233, 98, 98);">$_y</span> * [<span style="color: rgb(233, 98, 98);">$obj</span> Real])  + (<span style="color: rgb(233, 98, 98);">$_z</span> * [<span style="color: rgb(233, 98, 98);">$obj</span> ImagX]) + (<span style="color: rgb(233, 98, 98);">$_w</span> * [<span style="color: rgb(233, 98, 98);">$obj</span> ImagY])}]
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> ck [expr {(<span style="color: rgb(233, 98, 98);">$_x</span>      * [<span style="color: rgb(233, 98, 98);">$obj</span> ImagY]) - (<span style="color: rgb(233, 98, 98);">$_y</span> * [<span style="color: rgb(233, 98, 98);">$obj</span> ImagX]) + (<span style="color: rgb(233, 98, 98);">$_z</span> * [<span style="color: rgb(233, 98, 98);">$obj</span> Real])  + (<span style="color: rgb(233, 98, 98);">$_w</span> * [<span style="color: rgb(233, 98, 98);">$obj</span> ImagZ])}]
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> cr [expr {(Inv(<span style="color: rgb(233, 98, 98);">$_x</span>) * [<span style="color: rgb(233, 98, 98);">$obj</span> ImagX]) - (<span style="color: rgb(233, 98, 98);">$_y</span> * [<span style="color: rgb(233, 98, 98);">$obj</span> ImagY]) - (<span style="color: rgb(233, 98, 98);">$_z</span> * [<span style="color: rgb(233, 98, 98);">$obj</span> ImagZ]) + (<span style="color: rgb(233, 98, 98);">$_w</span> * [<span style="color: rgb(233, 98, 98);">$obj</span> Real])}]

        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathquat::Quaternion new <span style="color: rgb(233, 98, 98);">$cr</span> <span style="color: rgb(233, 98, 98);">$ci</span> <span style="color: rgb(233, 98, 98);">$cj</span> <span style="color: rgb(233, 98, 98);">$ck</span>]
    }
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::+'>+</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Add a floating point number to a quaternion, if <code>$obj</code> is double or add a quaternion to a quaternion, if <code>$obj</code> is an Quaternion object.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ +</span> <span class='ruff_arg'>obj</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><nobr><code>obj</code></nobr></td><td>Options described below.</td></tr>
<tr><td><nobr><code>object</code></nobr></td><td>A Quaternion component.</td></tr>
<tr><td><nobr><code>scalar</code></nobr></td><td>A double value.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns A quaternion whose real value is increased by a scalar if <code>$obj</code> is double value.<br> Or the sum of two quaternions <a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="Quaternion" class='ruff_cmd'>Quaternion</a> if <code>$obj</code> is a quaternion object.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_+' href="javascript:toggleSource('tomato_mathquat_Quaternion_+')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_+' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> + {obj} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Add a floating point number to a quaternion, if <span style="color: rgb(233, 98, 98);">$obj</span> is double</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # or add a quaternion to a quaternion, if <span style="color: rgb(233, 98, 98);">$obj</span> is an Quaternion object.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # obj - Options described below.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # scalar - A double value.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # object - A Quaternion component.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns A quaternion whose real value is increased by a scalar if <span style="color: rgb(233, 98, 98);">$obj</span> is double value.&lt;br&gt;</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Or the sum of two quaternions [Quaternion] if <span style="color: rgb(233, 98, 98);">$obj</span> is a quaternion object.</span>
    if {[string is double <span style="color: rgb(233, 98, 98);">$obj</span>]} {
        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathquat::Quaternion new [expr {<span style="color: rgb(233, 98, 98);">$_w</span> + <span style="color: rgb(233, 98, 98);">$obj</span>}] <span style="color: rgb(233, 98, 98);">$_x</span> <span style="color: rgb(233, 98, 98);">$_y</span> <span style="color: rgb(233, 98, 98);">$_z</span>]
    }

    if {[tomato::helper::TypeOf <span style="color: rgb(233, 98, 98);">$obj</span> Isa <span style="color: hsl(120, 71%, 16%);">&quot;Quaternion&quot;</span>]} {
        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathquat::Quaternion new [expr {<span style="color: rgb(233, 98, 98);">$_w</span> + [<span style="color: rgb(233, 98, 98);">$obj</span> Real]}]  [expr {<span style="color: rgb(233, 98, 98);">$_x</span> + [<span style="color: rgb(233, 98, 98);">$obj</span> ImagX]}]  [expr {<span style="color: rgb(233, 98, 98);">$_y</span> + [<span style="color: rgb(233, 98, 98);">$obj</span> ImagY]}]  [expr {<span style="color: rgb(233, 98, 98);">$_z</span> + [<span style="color: rgb(233, 98, 98);">$obj</span> ImagZ]}]]
    }
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::-'>-</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Subtract a floating point number from a quaternion, if <code>$obj</code> is double.<br> Or subtract a quaternion from a quaternion, if <code>$obj</code> is an Quaternion object.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ -</span> <span class='ruff_arg'>obj</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><nobr><code>obj</code></nobr></td><td>Options described below.</td></tr>
<tr><td><nobr><code>object</code></nobr></td><td>A Quaternion component.</td></tr>
<tr><td><nobr><code>scalar</code></nobr></td><td>A double value.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns A quaternion whose real value is discreased by a scalar if <code>$obj</code> is double value.<br> Or the quaternion <a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="Quaternion" class='ruff_cmd'>Quaternion</a> difference if <code>$obj</code> is a quaternion object.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_-' href="javascript:toggleSource('tomato_mathquat_Quaternion_-')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_-' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> - {obj} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Subtract a floating point number from a quaternion, if <span style="color: rgb(233, 98, 98);">$obj</span> is double.&lt;br&gt;</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Or subtract a quaternion from a quaternion, if <span style="color: rgb(233, 98, 98);">$obj</span> is an Quaternion object.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # obj - Options described below.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # scalar - A double value.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # object - A Quaternion component.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns A quaternion whose real value is discreased by a scalar if <span style="color: rgb(233, 98, 98);">$obj</span> is double value.&lt;br&gt;</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Or the quaternion [Quaternion] difference if <span style="color: rgb(233, 98, 98);">$obj</span> is a quaternion object.</span>
    if {[string is double <span style="color: rgb(233, 98, 98);">$obj</span>]} {
        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathquat::Quaternion new [expr {<span style="color: rgb(233, 98, 98);">$_w</span> - <span style="color: rgb(233, 98, 98);">$obj</span>}] <span style="color: rgb(233, 98, 98);">$_x</span> <span style="color: rgb(233, 98, 98);">$_y</span> <span style="color: rgb(233, 98, 98);">$_z</span>]
    }

    if {[tomato::helper::TypeOf <span style="color: rgb(233, 98, 98);">$obj</span> Isa <span style="color: hsl(120, 71%, 16%);">&quot;Quaternion&quot;</span>]} {
        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathquat::Quaternion new [expr {<span style="color: rgb(233, 98, 98);">$_w</span> - [<span style="color: rgb(233, 98, 98);">$obj</span> Real]}]  [expr {<span style="color: rgb(233, 98, 98);">$_x</span> - [<span style="color: rgb(233, 98, 98);">$obj</span> ImagX]}]  [expr {<span style="color: rgb(233, 98, 98);">$_y</span> - [<span style="color: rgb(233, 98, 98);">$obj</span> ImagY]}]  [expr {<span style="color: rgb(233, 98, 98);">$_z</span> - [<span style="color: rgb(233, 98, 98);">$obj</span> ImagZ]}]]
    }
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::/'>/</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Divide a quaternion by a floating point number, if <code>$obj</code> is double.<br> Or divide a quaternion by a quaternion, if <code>$obj</code> is an Quaternion object.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ /</span> <span class='ruff_arg'>obj</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><nobr><code>obj</code></nobr></td><td>Options described below.</td></tr>
<tr><td><nobr><code>object</code></nobr></td><td>A Quaternion component.</td></tr>
<tr><td><nobr><code>scalar</code></nobr></td><td>A double value.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns A new divided quaternion <a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="Quaternion" class='ruff_cmd'>Quaternion</a>.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_/' href="javascript:toggleSource('tomato_mathquat_Quaternion_/')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_/' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> / {obj} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Divide a quaternion by a floating point number, if <span style="color: rgb(233, 98, 98);">$obj</span> is double.&lt;br&gt;</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Or divide a quaternion by a quaternion, if <span style="color: rgb(233, 98, 98);">$obj</span> is an Quaternion object.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # obj - Options described below.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # scalar - A double value.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # object - A Quaternion component.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns A new divided quaternion [Quaternion].</span>
    if {[string is double <span style="color: rgb(233, 98, 98);">$obj</span>]} {
        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathquat::Quaternion new [expr {<span style="color: rgb(233, 98, 98);">$_w</span> / double(<span style="color: rgb(233, 98, 98);">$obj</span>)}]  [expr {<span style="color: rgb(233, 98, 98);">$_x</span> / double(<span style="color: rgb(233, 98, 98);">$obj</span>)}]  [expr {<span style="color: rgb(233, 98, 98);">$_y</span> / double(<span style="color: rgb(233, 98, 98);">$obj</span>)}]  [expr {<span style="color: rgb(233, 98, 98);">$_z</span> / double(<span style="color: rgb(233, 98, 98);">$obj</span>)}]]
    }

    if {[tomato::helper::TypeOf <span style="color: rgb(233, 98, 98);">$obj</span> Isa <span style="color: hsl(120, 71%, 16%);">&quot;Quaternion&quot;</span>]} {

        if {[<span style="color: rgb(233, 98, 98);">$obj</span> == <span style="color: rgb(233, 98, 98);">$::tomato::mathquat::Zero</span>]} {
            if {[[self] == <span style="color: rgb(233, 98, 98);">$::tomato::mathquat::Zero</span>]} {
                <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathquat::Quaternion new <span style="color: hsl(120, 71%, 16%);">&quot;NaN&quot; &quot;NaN&quot; &quot;NaN&quot; &quot;NaN&quot;</span>]
            }

            <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathquat::Quaternion new <span style="color: hsl(120, 71%, 16%);">&quot;Inf&quot; &quot;Inf&quot; &quot;Inf&quot; &quot;Inf&quot;</span>]

        }

        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> normSquared [<span style="color: rgb(233, 98, 98);">$obj</span> NormSquared]
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> t0 [expr {(([<span style="color: rgb(233, 98, 98);">$obj</span> Real] * <span style="color: rgb(233, 98, 98);">$_w</span>) + ([<span style="color: rgb(233, 98, 98);">$obj</span> ImagX] * <span style="color: rgb(233, 98, 98);">$_x</span>) + ([<span style="color: rgb(233, 98, 98);">$obj</span> ImagY] * <span style="color: rgb(233, 98, 98);">$_y</span>) + ([<span style="color: rgb(233, 98, 98);">$obj</span> ImagZ] * <span style="color: rgb(233, 98, 98);">$_z</span>)) / double(<span style="color: rgb(233, 98, 98);">$normSquared</span>)}]
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> t1 [expr {(([<span style="color: rgb(233, 98, 98);">$obj</span> Real] * <span style="color: rgb(233, 98, 98);">$_x</span>) - ([<span style="color: rgb(233, 98, 98);">$obj</span> ImagX] * <span style="color: rgb(233, 98, 98);">$_w</span>) - ([<span style="color: rgb(233, 98, 98);">$obj</span> ImagY] * <span style="color: rgb(233, 98, 98);">$_z</span>) + ([<span style="color: rgb(233, 98, 98);">$obj</span> ImagZ] * <span style="color: rgb(233, 98, 98);">$_y</span>)) / double(<span style="color: rgb(233, 98, 98);">$normSquared</span>)}]
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> t2 [expr {(([<span style="color: rgb(233, 98, 98);">$obj</span> Real] * <span style="color: rgb(233, 98, 98);">$_y</span>) + ([<span style="color: rgb(233, 98, 98);">$obj</span> ImagX] * <span style="color: rgb(233, 98, 98);">$_z</span>) - ([<span style="color: rgb(233, 98, 98);">$obj</span> ImagY] * <span style="color: rgb(233, 98, 98);">$_w</span>) - ([<span style="color: rgb(233, 98, 98);">$obj</span> ImagZ] * <span style="color: rgb(233, 98, 98);">$_x</span>)) / double(<span style="color: rgb(233, 98, 98);">$normSquared</span>)}]
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> t3 [expr {(([<span style="color: rgb(233, 98, 98);">$obj</span> Real] * <span style="color: rgb(233, 98, 98);">$_z</span>) - ([<span style="color: rgb(233, 98, 98);">$obj</span> ImagX] * <span style="color: rgb(233, 98, 98);">$_y</span>) + ([<span style="color: rgb(233, 98, 98);">$obj</span> ImagY] * <span style="color: rgb(233, 98, 98);">$_x</span>) - ([<span style="color: rgb(233, 98, 98);">$obj</span> ImagZ] * <span style="color: rgb(233, 98, 98);">$_w</span>)) / double(<span style="color: rgb(233, 98, 98);">$normSquared</span>)}]

        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathquat::Quaternion new <span style="color: rgb(233, 98, 98);">$t0</span> <span style="color: rgb(233, 98, 98);">$t1</span> <span style="color: rgb(233, 98, 98);">$t2</span> <span style="color: rgb(233, 98, 98);">$t3</span>]
    }
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::=='>==</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Equality operator for two quaternions if <code>$obj</code> is quaternion component.<br> Equality operator for quaternion and double if <code>$obj</code> is double.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ ==</span> <span class='ruff_arg'>obj ?tolerance?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><nobr><code>obj</code></nobr></td><td>Options described below.</td></tr>
<tr><td><nobr><code>tolerance</code></nobr></td><td>A tolerance (epsilon) to adjust for floating point error. Optional, default <code>$::tomato::helper::TolEquals</code>.</td></tr>
<tr><td><nobr><code>object</code></nobr></td><td>A Quaternion component.</td></tr>
<tr><td><nobr><code>scalar</code></nobr></td><td>A double value.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns <code>True</code> if the quaternions are the same if <code>$obj</code> is a quaternion or True if the real part of the quaternion is almost equal to the double and the rest of the quaternion is almost 0. Otherwise <code>False</code>.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_==' href="javascript:toggleSource('tomato_mathquat_Quaternion_==')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_==' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> == {obj {tolerance {<span style="color: rgb(233, 98, 98);">$::tomato::helper::TolEquals</span>}}} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Equality operator for two quaternions if <span style="color: rgb(233, 98, 98);">$obj</span> is quaternion component.&lt;br&gt;</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Equality operator for quaternion and double if <span style="color: rgb(233, 98, 98);">$obj</span> is double.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # obj - Options described below.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # scalar    - A double value.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # object    - A Quaternion component.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # tolerance - A tolerance (epsilon) to adjust for floating point error.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns `True` if the quaternions are the same if <span style="color: rgb(233, 98, 98);">$obj</span> is a quaternion or</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # True if the real part of the quaternion is almost equal to the double and the rest of the quaternion is almost 0. Otherwise `False`.</span>
    if {[llength [info level 0]] &lt; 4} {
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> tolerance <span style="color: rgb(233, 98, 98);">$::tomato::helper::TolEquals</span>
    }

    if {[string is double <span style="color: rgb(233, 98, 98);">$obj</span>]} {
        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [expr {
                        ((<span style="color: rgb(233, 98, 98);">$_w</span> - <span style="color: rgb(233, 98, 98);">$obj</span>) &lt; <span style="color: rgb(233, 98, 98);">$tolerance</span>) &amp;&amp;
                        ((<span style="color: rgb(233, 98, 98);">$_x</span> - 0) &lt; <span style="color: rgb(233, 98, 98);">$tolerance</span>) &amp;&amp;
                        ((<span style="color: rgb(233, 98, 98);">$_y</span> - 0) &lt; <span style="color: rgb(233, 98, 98);">$tolerance</span>) &amp;&amp;
                        ((<span style="color: rgb(233, 98, 98);">$_z</span> - 0) &lt; <span style="color: rgb(233, 98, 98);">$tolerance</span>)
                    }]
    }

    if {[tomato::helper::TypeOf <span style="color: rgb(233, 98, 98);">$obj</span> Isa <span style="color: hsl(120, 71%, 16%);">&quot;Quaternion&quot;</span>]} {
        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathquat::Equals [self] <span style="color: rgb(233, 98, 98);">$obj</span> <span style="color: rgb(233, 98, 98);">$tolerance</span>]
    }
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::^'>^</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Raise a quaternion to a floating point number.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ ^</span> <span class='ruff_arg'>obj</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><nobr><code>obj</code></nobr></td><td>A double value.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns A new quaternion <a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="Quaternion" class='ruff_cmd'>Quaternion</a>.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_^' href="javascript:toggleSource('tomato_mathquat_Quaternion_^')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_^' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> ^ {obj} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Raise a quaternion to a floating point number.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # obj - A double value.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns A new quaternion [Quaternion].</span>
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathquat::Pow [self] <span style="color: rgb(233, 98, 98);">$obj</span>]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::Angle'>Angle</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets the angle (in radians) describing the magnitude of the quaternion rotation about it's rotation axis.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ Angle</span> </div>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns A real number in the range <code>[-pi:pi]</code> describing the angle of rotation in radians about a Quaternion object's axis of rotation</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_Angle' href="javascript:toggleSource('tomato_mathquat_Quaternion_Angle')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_Angle' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> Angle {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Gets the angle (in radians) describing the magnitude of the quaternion rotation about it's rotation axis.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns A real number in the range `[-pi:pi]` describing the angle of rotation</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # in radians about a Quaternion object's axis of rotation</span>
    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> q [self]

    if {![<span style="color: rgb(233, 98, 98);">$q</span> IsUnitQuaternion]} {
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> q [<span style="color: rgb(233, 98, 98);">$q</span> Normalized]
    }

    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> norm [[<span style="color: rgb(233, 98, 98);">$q</span> ToVector3D] Length]

    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathquat::_wrap_angle [expr {2.0 * atan2(<span style="color: rgb(233, 98, 98);">$norm</span>, [my Real])}]]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::Arg'>Arg</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets the argument <code>phi = arg(q)</code> of the quaternion <code>q</code>, such that <code>q = r*(cos(phi) + u*sin(phi)) = r*exp(phi*u)</code><br> where <code>r</code> is the absolute and <code>u</code> the unit vector of <code>q</code>.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ Arg</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_Arg' href="javascript:toggleSource('tomato_mathquat_Quaternion_Arg')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_Arg' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> Arg {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Gets the argument `phi = arg(q)` of the quaternion `q`, such that `q = r*(cos(phi) +</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # u*sin(phi)) = r*exp(phi*u)`&lt;br&gt; where `r` is the absolute and `u` the unit vector of</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # `q`.</span>
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [expr {acos(<span style="color: rgb(233, 98, 98);">$_w</span> / [my Norm])}]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::Conjugate'>Conjugate</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Conjugate this quaternion.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ Conjugate</span> </div>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns A new conjugated quaternion <a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="Quaternion" class='ruff_cmd'>Quaternion</a></p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_Conjugate' href="javascript:toggleSource('tomato_mathquat_Quaternion_Conjugate')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_Conjugate' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> Conjugate {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Conjugate this quaternion.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns A new conjugated quaternion [Quaternion]</span>
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathquat::Quaternion new <span style="color: rgb(233, 98, 98);">$_w</span>  [expr {Inv(<span style="color: rgb(233, 98, 98);">$_x</span>)}]  [expr {Inv(<span style="color: rgb(233, 98, 98);">$_y</span>)}]  [expr {Inv(<span style="color: rgb(233, 98, 98);">$_z</span>)}]]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::Distance'>Distance</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets the distance |a-b| of two quaternions, forming a metric space.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ Distance</span> <span class='ruff_arg'>q</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><nobr><code>q</code></nobr></td><td>A Quaternion component.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns The distance between two quaternions.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_Distance' href="javascript:toggleSource('tomato_mathquat_Quaternion_Distance')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_Distance' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> Distance {q} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Gets the distance |a-b| of two quaternions, forming a metric space.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # q - A Quaternion component.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns The distance between two quaternions.</span>
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [[my - <span style="color: rgb(233, 98, 98);">$q</span>] Norm]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::Exp'>Exp</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Exponential Function.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ Exp</span> </div>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns A new quaternion <a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="Quaternion" class='ruff_cmd'>Quaternion</a></p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_Exp' href="javascript:toggleSource('tomato_mathquat_Quaternion_Exp')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_Exp' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> Exp {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Exponential Function.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns A new quaternion [Quaternion]</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> mathE 2.7182818284590451 ; # https://docs.microsoft.com/en-us/dotnet/api/system.math.e?view=net-5.0</span>

    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> real       [expr {pow(<span style="color: rgb(233, 98, 98);">$mathE</span>, <span style="color: rgb(233, 98, 98);">$_w</span>)}]
    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> vector     [my Vector]
    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> vectorNorm [<span style="color: rgb(233, 98, 98);">$vector</span> Norm]
    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> cos [expr {cos(<span style="color: rgb(233, 98, 98);">$vectorNorm</span>)}]
    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> sgn [expr {[<span style="color: rgb(233, 98, 98);">$vector</span> == <span style="color: rgb(233, 98, 98);">$::tomato::mathquat::Zero</span>] ? <span style="color: rgb(233, 98, 98);">$::tomato::mathquat::Zero</span> : [<span style="color: rgb(233, 98, 98);">$vector</span> / <span style="color: rgb(233, 98, 98);">$vectorNorm</span>]}]
    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> sin [expr {sin(<span style="color: rgb(233, 98, 98);">$vectorNorm</span>)}]

    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [[[<span style="color: rgb(233, 98, 98);">$sgn</span> * <span style="color: rgb(233, 98, 98);">$sin</span>] + <span style="color: rgb(233, 98, 98);">$cos</span>] * <span style="color: rgb(233, 98, 98);">$real</span>]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::Get'>Get</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets values from the Quaternion Class under Tcl list form.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ Get</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_Get' href="javascript:toggleSource('tomato_mathquat_Quaternion_Get')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_Get' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> Get {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Gets values from the Quaternion Class under Tcl list form.</span>
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [list <span style="color: rgb(233, 98, 98);">$_x</span> <span style="color: rgb(233, 98, 98);">$_y</span> <span style="color: rgb(233, 98, 98);">$_z</span> <span style="color: rgb(233, 98, 98);">$_w</span>]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::GetType'>GetType</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets the name of class.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ GetType</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_GetType' href="javascript:toggleSource('tomato_mathquat_Quaternion_GetType')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_GetType' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> GetType {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Gets the name of class.</span>
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::helper::TypeClass [self]]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::ImagX'>ImagX</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets the imaginary X part (coefficient of complex I) of the quaternion.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ ImagX</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_ImagX' href="javascript:toggleSource('tomato_mathquat_Quaternion_ImagX')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_ImagX' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> ImagX {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Gets the imaginary X part (coefficient of complex I) of the quaternion.</span>
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> <span style="color: rgb(233, 98, 98);">$_x</span>
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::ImagY'>ImagY</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets the imaginary Y part (coefficient of complex J) of the quaternion.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ ImagY</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_ImagY' href="javascript:toggleSource('tomato_mathquat_Quaternion_ImagY')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_ImagY' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> ImagY {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Gets the imaginary Y part (coefficient of complex J) of the quaternion.</span>
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> <span style="color: rgb(233, 98, 98);">$_y</span>
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::ImagZ'>ImagZ</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets the imaginary Z part (coefficient of complex K) of the quaternion.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ ImagZ</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_ImagZ' href="javascript:toggleSource('tomato_mathquat_Quaternion_ImagZ')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_ImagZ' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> ImagZ {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Gets the imaginary Z part (coefficient of complex K) of the quaternion.</span>
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> <span style="color: rgb(233, 98, 98);">$_z</span>
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::Inversed'>Inversed</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets an inverted quaternion. Inversing Zero returns Zero</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ Inversed</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_Inversed' href="javascript:toggleSource('tomato_mathquat_Quaternion_Inversed')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_Inversed' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> Inversed {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Gets an inverted quaternion. Inversing Zero returns Zero</span>
    if {[[self] == <span style="color: rgb(233, 98, 98);">$::tomato::mathquat::Zero</span>]} {
        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [self]
    }

    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> normSquared [my NormSquared]
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathquat::Quaternion new [expr {<span style="color: rgb(233, 98, 98);">$_w</span>      / double(<span style="color: rgb(233, 98, 98);">$normSquared</span>)}]  [expr {Inv(<span style="color: rgb(233, 98, 98);">$_x</span>) / double(<span style="color: rgb(233, 98, 98);">$normSquared</span>)}]  [expr {Inv(<span style="color: rgb(233, 98, 98);">$_y</span>) / double(<span style="color: rgb(233, 98, 98);">$normSquared</span>)}]  [expr {Inv(<span style="color: rgb(233, 98, 98);">$_z</span>) / double(<span style="color: rgb(233, 98, 98);">$normSquared</span>)}]]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::IsInfinity'>IsInfinity</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a value indicating whether the quaternion is not a number</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ IsInfinity</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_IsInfinity' href="javascript:toggleSource('tomato_mathquat_Quaternion_IsInfinity')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_IsInfinity' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> IsInfinity {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Gets a value indicating whether the quaternion is not a number</span>
    foreach value [my Get] {
        if {<span style="color: rgb(233, 98, 98);">$value</span> eq <span style="color: hsl(120, 71%, 16%);">&quot;Inf&quot;</span>} {
            <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> 1
        }
    }
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> 0
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::IsNan'>IsNan</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a value indicating whether the quaternion is not a number</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ IsNan</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_IsNan' href="javascript:toggleSource('tomato_mathquat_Quaternion_IsNan')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_IsNan' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> IsNan {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Gets a value indicating whether the quaternion is not a number</span>
    foreach value [my Get] {
        if {<span style="color: rgb(233, 98, 98);">$value</span> eq <span style="color: hsl(120, 71%, 16%);">&quot;NaN&quot;</span>} {
            <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> 1
        }
    }
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> 0
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::IsUnitQuaternion'>IsUnitQuaternion</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a value indicating whether the quaternion q has length |q| = 1. To normalize a quaternion to a length of 1, use the <a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Normalized" title="Normalized" class='ruff_cmd'>Normalized</a> method. All unit quaternions form a 3-sphere.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ IsUnitQuaternion</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_IsUnitQuaternion' href="javascript:toggleSource('tomato_mathquat_Quaternion_IsUnitQuaternion')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_IsUnitQuaternion' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> IsUnitQuaternion {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Gets a value indicating whether the quaternion q has length |q| = 1.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # To normalize a quaternion to a length of 1, use the [Normalized] method.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # All unit quaternions form a 3-sphere.</span>
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [expr {abs(1.0 - [my NormSquared]) &lt; 1e-15}]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::Log'>Log</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Logarithm to a given base.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ Log</span> <span class='ruff_arg'>?lbase?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><nobr><code>lbase</code></nobr></td><td>A base Optional, default <code>&quot;&quot;</code>.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns A new quaternion <a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="Quaternion" class='ruff_cmd'>Quaternion</a></p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_Log' href="javascript:toggleSource('tomato_mathquat_Quaternion_Log')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_Log' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> Log {{lbase {}}} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Logarithm to a given base.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # lbase - A base</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns A new quaternion [Quaternion]</span>
    if {[llength [info level 0]] &lt; 3} {

        if {[my == <span style="color: rgb(233, 98, 98);">$::tomato::mathquat::One</span>]} {<span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> <span style="color: rgb(233, 98, 98);">$::tomato::mathquat::One</span>}

        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> quat [[my NormalizedVector] * [my Arg]]
        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathquat::Quaternion new [expr {log([my Norm])}] [<span style="color: rgb(233, 98, 98);">$quat</span> ImagX] [<span style="color: rgb(233, 98, 98);">$quat</span> ImagY] [<span style="color: rgb(233, 98, 98);">$quat</span> ImagZ]]

    } else {
        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [[my Log] / [expr {log(<span style="color: rgb(233, 98, 98);">$lbase</span>)}]]
    }
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::Log10'>Log10</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Common Logarithm to base 10.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ Log10</span> </div>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns A new quaternion</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_Log10' href="javascript:toggleSource('tomato_mathquat_Quaternion_Log10')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_Log10' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> Log10 {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Common Logarithm to base 10.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns A new quaternion</span>
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [[my Log] / [expr {log(10)}]]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::Negate'>Negate</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Negate a quaternion.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ Negate</span> </div>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns A negated quaternion <a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="Quaternion" class='ruff_cmd'>Quaternion</a>.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_Negate' href="javascript:toggleSource('tomato_mathquat_Quaternion_Negate')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_Negate' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> Negate {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Negate a quaternion.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns A negated quaternion [Quaternion].</span>
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathquat::Quaternion new [expr {Inv(<span style="color: rgb(233, 98, 98);">$_w</span>)}]  [expr {Inv(<span style="color: rgb(233, 98, 98);">$_x</span>)}]  [expr {Inv(<span style="color: rgb(233, 98, 98);">$_y</span>)}]  [expr {Inv(<span style="color: rgb(233, 98, 98);">$_z</span>)}]]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::Norm'>Norm</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets the norm of the quaternion q: square root of the sum of the squares of the four components.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ Norm</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_Norm' href="javascript:toggleSource('tomato_mathquat_Quaternion_Norm')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_Norm' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> Norm {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Gets the norm of the quaternion q: square root of the sum of the squares of the four components.</span>
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [expr {sqrt([my NormSquared])}]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::Normalized'>Normalized</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a new normalized Quaternion <code>q</code> with the direction of this quaternion.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ Normalized</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_Normalized' href="javascript:toggleSource('tomato_mathquat_Quaternion_Normalized')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_Normalized' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> Normalized {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Gets a new normalized Quaternion `q` with the direction of this quaternion.</span>
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [expr {[[self] == <span style="color: rgb(233, 98, 98);">$::tomato::mathquat::Zero</span>] ? [self] : [tomato::mathquat::ToUnitQuaternion <span style="color: rgb(233, 98, 98);">$_w</span> <span style="color: rgb(233, 98, 98);">$_x</span> <span style="color: rgb(233, 98, 98);">$_y</span> <span style="color: rgb(233, 98, 98);">$_z</span>]}]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::NormalizedVector'>NormalizedVector</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a new normalized Quaternion <code>u</code> with the Vector part only, such that <code>||u|| = 1</code>.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ NormalizedVector</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_NormalizedVector' href="javascript:toggleSource('tomato_mathquat_Quaternion_NormalizedVector')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_NormalizedVector' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> NormalizedVector {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Gets a new normalized Quaternion `u` with the Vector part only, such that `||u|| = 1`.</span>
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathquat::ToUnitQuaternion 0 <span style="color: rgb(233, 98, 98);">$_x</span> <span style="color: rgb(233, 98, 98);">$_y</span> <span style="color: rgb(233, 98, 98);">$_z</span>]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::NormSquared'>NormSquared</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets the sum of the squares of the four components.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ NormSquared</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_NormSquared' href="javascript:toggleSource('tomato_mathquat_Quaternion_NormSquared')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_NormSquared' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> NormSquared {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Gets the sum of the squares of the four components.</span>
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathquat::ToNormSquared <span style="color: rgb(233, 98, 98);">$_w</span> <span style="color: rgb(233, 98, 98);">$_x</span> <span style="color: rgb(233, 98, 98);">$_y</span> <span style="color: rgb(233, 98, 98);">$_z</span>]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::Real'>Real</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets the real part of the quaternion.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ Real</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_Real' href="javascript:toggleSource('tomato_mathquat_Quaternion_Real')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_Real' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> Real {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Gets the real part of the quaternion.</span>
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> <span style="color: rgb(233, 98, 98);">$_w</span>
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::Rotate'>Rotate</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Rotate a 3D vector or 3D point by the rotation stored in the Quaternion object</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ Rotate</span> <span class='ruff_arg'>obj</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><nobr><code>obj</code></nobr></td><td>Options described below.</td></tr>
<tr><td><nobr><code>point</code></nobr></td><td>A point object.</td></tr>
<tr><td><nobr><code>vector</code></nobr></td><td>A vector object.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns The rotated vector or point returned as the same type it was specified at input</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_Rotate' href="javascript:toggleSource('tomato_mathquat_Quaternion_Rotate')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_Rotate' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> Rotate {obj} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Rotate a 3D vector or 3D point by the rotation stored in the Quaternion object</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # obj - Options described below.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # point  - A point object.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # vector - A vector object.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns The rotated vector or point returned as the same type it was specified at input</span>
    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> myentity <span style="color: rgb(233, 98, 98);">$obj</span>

    if {[tomato::helper::TypeOf <span style="color: rgb(233, 98, 98);">$obj</span> Isa <span style="color: hsl(120, 71%, 16%);">&quot;Vector3d&quot;</span>]} {

        if {![<span style="color: rgb(233, 98, 98);">$obj</span> IsNormalized]} {
            <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> myentity [<span style="color: rgb(233, 98, 98);">$obj</span> Normalized]
        }

    } elseif {[tomato::helper::TypeOf <span style="color: rgb(233, 98, 98);">$obj</span> Isa <span style="color: hsl(120, 71%, 16%);">&quot;Point3d&quot;</span>]} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> myentity [<span style="color: rgb(233, 98, 98);">$obj</span> ToVector3D] ; # convert to vector</span>

    } else {
        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">error</span> <span style="color: hsl(120, 71%, 16%);">&quot;Obj must be an Class Vector3d Or an Class Point3d...&quot;</span>
    }

    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> quat [tomato::mathquat::Quaternion new <span style="color: rgb(233, 98, 98);">$myentity</span>]
    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> q    [self]

    if {![<span style="color: rgb(233, 98, 98);">$q</span> IsUnitQuaternion]} {
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> q [my Normalized]
    }

    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> result [<span style="color: rgb(233, 98, 98);">$q</span> RotateUnitQuaternion <span style="color: rgb(233, 98, 98);">$quat</span>]

    if {[tomato::helper::TypeOf <span style="color: rgb(233, 98, 98);">$obj</span> Isa <span style="color: hsl(120, 71%, 16%);">&quot;Vector3d&quot;</span>]} {
        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [<span style="color: rgb(233, 98, 98);">$result</span> ToVector3D]
    } else {
        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [[<span style="color: rgb(233, 98, 98);">$result</span> ToVector3D] ToPoint3D]
    }
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::RotateRotationQuaternion'>RotateRotationQuaternion</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Rotates the provided rotation quaternion with this quaternion.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ RotateRotationQuaternion</span> <span class='ruff_arg'>rotation</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><nobr><code>rotation</code></nobr></td><td>The rotation quaternion to rotate.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns A rotated quaternion <a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="Quaternion" class='ruff_cmd'>Quaternion</a>.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_RotateRotationQuaternion' href="javascript:toggleSource('tomato_mathquat_Quaternion_RotateRotationQuaternion')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_RotateRotationQuaternion' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> RotateRotationQuaternion {rotation} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Rotates the provided rotation quaternion with this quaternion.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # rotation - The rotation quaternion to rotate.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns A rotated quaternion [Quaternion].</span>
    if {![<span style="color: rgb(233, 98, 98);">$rotation</span> IsUnitQuaternion]} {
        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">error</span> <span style="color: hsl(120, 71%, 16%);">&quot;The quaternion provided is not a rotation&quot;</span>
    }

    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [<span style="color: rgb(233, 98, 98);">$rotation</span> * [self]]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::RotateUnitQuaternion'>RotateUnitQuaternion</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Rotates the provided unit quaternion with this quaternion.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ RotateUnitQuaternion</span> <span class='ruff_arg'>unitQuaternion</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><nobr><code>unitQuaternion</code></nobr></td><td>The rotation quaternion to rotate.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns A rotated quaternion <a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="Quaternion" class='ruff_cmd'>Quaternion</a>.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_RotateUnitQuaternion' href="javascript:toggleSource('tomato_mathquat_Quaternion_RotateUnitQuaternion')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_RotateUnitQuaternion' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> RotateUnitQuaternion {unitQuaternion} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Rotates the provided unit quaternion with this quaternion.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # unitQuaternion - The rotation quaternion to rotate.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns A rotated quaternion [Quaternion].</span>
    if {![my IsUnitQuaternion]} {
        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">error</span> <span style="color: hsl(120, 71%, 16%);">&quot;You cannot rotate with this quaternion as it is not a Unit Quaternion&quot;</span>
    }

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # if {![<span style="color: rgb(233, 98, 98);">$unitQuaternion</span> IsUnitQuaternion]} {</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #     <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">error</span> <span style="color: hsl(120, 71%, 16%);">&quot;The quaternion provided is not a Unit Quaternion&quot;</span></span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # }</span>

    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [[my * <span style="color: rgb(233, 98, 98);">$unitQuaternion</span>] * [my Conjugate]]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::Scalar'>Scalar</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a new Quaternion <code>q</code> with the Scalar part only.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ Scalar</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_Scalar' href="javascript:toggleSource('tomato_mathquat_Quaternion_Scalar')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_Scalar' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> Scalar {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Gets a new Quaternion `q` with the Scalar part only.</span>
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathquat::Quaternion new <span style="color: rgb(233, 98, 98);">$_w</span> 0 0 0]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::Sqrt'>Sqrt</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Square root of the Quaternion: q^(1/2).</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ Sqrt</span> </div>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns A new quaternion <a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="Quaternion" class='ruff_cmd'>Quaternion</a></p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_Sqrt' href="javascript:toggleSource('tomato_mathquat_Quaternion_Sqrt')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_Sqrt' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> Sqrt {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Square root of the Quaternion: q^(1/2).</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns A new quaternion [Quaternion]</span>
    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> arg [expr {[my Arg] * 0.5}]

    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [[my NormalizedVector] * [expr {sin(<span style="color: rgb(233, 98, 98);">$arg</span>) + cos(<span style="color: rgb(233, 98, 98);">$arg</span>) + sqrt(<span style="color: rgb(233, 98, 98);">$_w</span>)}]]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::ToString'>ToString</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Returns a string representation of this object.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ ToString</span> </div>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a string representation of this object.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_ToString' href="javascript:toggleSource('tomato_mathquat_Quaternion_ToString')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_ToString' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> ToString {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns a string representation of this object.</span>

    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> formatimgx [expr {(<span style="color: rgb(233, 98, 98);">$_x</span> &lt; 0 ) ? <span style="color: hsl(120, 71%, 16%);">&quot;%si&quot; : &quot;+%si&quot;</span>}]
    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> formatimgy [expr {(<span style="color: rgb(233, 98, 98);">$_y</span> &lt; 0 ) ? <span style="color: hsl(120, 71%, 16%);">&quot;%sj&quot; : &quot;+%sj&quot;</span>}]
    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> formatimgz [expr {(<span style="color: rgb(233, 98, 98);">$_z</span> &lt; 0 ) ? <span style="color: hsl(120, 71%, 16%);">&quot;%sk&quot; : &quot;+%sk&quot;</span>}]


    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [format [list %s <span style="color: rgb(233, 98, 98);">$formatimgx</span> <span style="color: rgb(233, 98, 98);">$formatimgy</span> <span style="color: rgb(233, 98, 98);">$formatimgz</span>] <span style="color: rgb(233, 98, 98);">$_w</span> <span style="color: rgb(233, 98, 98);">$_x</span> <span style="color: rgb(233, 98, 98);">$_y</span> <span style="color: rgb(233, 98, 98);">$_z</span>]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::ToVector3D'>ToVector3D</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets the Vector part only.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ ToVector3D</span> </div>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns A new vector3d <a href="tomato-tomato-mathvec3d.html#::tomato::mathvec3d::Vector3d" title="mathvec3d::Vector3d" class='ruff_cmd'>mathvec3d::Vector3d</a></p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_ToVector3D' href="javascript:toggleSource('tomato_mathquat_Quaternion_ToVector3D')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_ToVector3D' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> ToVector3D {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Gets the Vector part only.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns A new vector3d [mathvec3d::Vector3d]</span>
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathvec3d::Vector3d new <span style="color: rgb(233, 98, 98);">$_x</span> <span style="color: rgb(233, 98, 98);">$_y</span> <span style="color: rgb(233, 98, 98);">$_z</span>]
}</pre></div>
</div><h4 class='ruffmethod'><a name='::tomato::mathquat::Quaternion::Vector'>Vector</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="::tomato::mathquat::Quaternion" class='ruff_cmd'>::tomato::mathquat::Quaternion</a>]</span><span class='ruff-uplink'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a>, <a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a new Quaternion <code>q</code> with the Vector part only.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>QUATERNIONOBJ Vector</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Quaternion_Vector' href="javascript:toggleSource('tomato_mathquat_Quaternion_Vector')">Show source</a></p>
<div id='tomato_mathquat_Quaternion_Vector' class='ruff_dyn_src'><pre><span style="color: rgba(241, 8, 218, 1);font-weight: 550;">method</span> Vector {} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Gets a new Quaternion `q` with the Vector part only.</span>
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathquat::Quaternion new 0 <span style="color: rgb(233, 98, 98);">$_x</span> <span style="color: rgb(233, 98, 98);">$_y</span> <span style="color: rgb(233, 98, 98);">$_z</span>]
}</pre></div>
</div><h2 class='ruff'><a name='::tomato::mathquat-Commands'></a>Commands<span class='ruff-uplink'><a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h2>
<div style='clear:both;'></div>
<h3 class='ruffproc'><a name='::tomato::mathquat::Dot'>Dot</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat" title="::tomato::mathquat" class='ruff_cmd'>::tomato::mathquat</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Dot Product between 2 quaternions</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>Dot</span> <span class='ruff_arg'>q0 q1</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><nobr><code>q0</code></nobr></td><td>First quaternion component</td></tr>
<tr><td><nobr><code>q1</code></nobr></td><td>Second quaternion component</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the dot product.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Dot' href="javascript:toggleSource('tomato_mathquat_Dot')">Show source</a></p>
<div id='tomato_mathquat_Dot' class='ruff_dyn_src'><pre>proc ::tomato::mathquat::Dot {q0 q1} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Dot Product between 2 quaternions</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # q0 - First quaternion component</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # q1 - Second quaternion component</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns the dot product.</span>
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [expr {
                    ([<span style="color: rgb(233, 98, 98);">$q0</span> ImagX] * [<span style="color: rgb(233, 98, 98);">$q1</span> ImagX]) +
                    ([<span style="color: rgb(233, 98, 98);">$q0</span> ImagY] * [<span style="color: rgb(233, 98, 98);">$q1</span> ImagY]) +
                    ([<span style="color: rgb(233, 98, 98);">$q0</span> ImagZ] * [<span style="color: rgb(233, 98, 98);">$q1</span> ImagZ]) +
                    ([<span style="color: rgb(233, 98, 98);">$q0</span> Real]  * [<span style="color: rgb(233, 98, 98);">$q1</span> Real])
                 }]
}</pre></div>
</div><h3 class='ruffproc'><a name='::tomato::mathquat::Equals'>Equals</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat" title="::tomato::mathquat" class='ruff_cmd'>::tomato::mathquat</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Indicate if this quaternion is equivalent to a given quaternion</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>Equals</span> <span class='ruff_arg'>quaternion other tolerance</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><nobr><code>quaternion</code></nobr></td><td>First input vector  <a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="Quaternion" class='ruff_cmd'>Quaternion</a></td></tr>
<tr><td><nobr><code>other</code></nobr></td><td>Second input vector <a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="Quaternion" class='ruff_cmd'>Quaternion</a></td></tr>
<tr><td><nobr><code>tolerance</code></nobr></td><td>A tolerance (epsilon) to adjust for floating point error</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>See : methods == !=</p>
<p class='ruff'>An error exception is raised if tolerance (epsilon) &lt; 0.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns <code>True</code> if the quaternions are equal, otherwise false.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Equals' href="javascript:toggleSource('tomato_mathquat_Equals')">Show source</a></p>
<div id='tomato_mathquat_Equals' class='ruff_dyn_src'><pre>proc ::tomato::mathquat::Equals {quaternion other tolerance} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Indicate if this quaternion is equivalent to a given quaternion</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # quaternion - First input vector  [Quaternion]</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # other      - Second input vector [Quaternion]</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # tolerance  - A tolerance (epsilon) to adjust for floating point error</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns `True` if the quaternions are equal, otherwise false.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # See : methods == !=</span>

    if {([<span style="color: rgb(233, 98, 98);">$other</span> IsNan] &amp;&amp; [<span style="color: rgb(233, 98, 98);">$quaternion</span> IsNan]) || ([<span style="color: rgb(233, 98, 98);">$other</span> IsInfinity] &amp;&amp; [<span style="color: rgb(233, 98, 98);">$quaternion</span> IsInfinity])} {
        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> 1
    }

    if {<span style="color: rgb(233, 98, 98);">$tolerance</span> &lt; 0} {
        #ruff
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">        # An <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">error</span> exception is raised if tolerance (epsilon) &lt; 0.</span>
        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">error</span> <span style="color: hsl(120, 71%, 16%);">&quot;epsilon &lt; 0&quot;</span>
    }

    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [expr {
                  abs([<span style="color: rgb(233, 98, 98);">$quaternion</span> Real]  - [<span style="color: rgb(233, 98, 98);">$other</span> Real])  &lt; <span style="color: rgb(233, 98, 98);">$tolerance</span> &amp;&amp;
                  abs([<span style="color: rgb(233, 98, 98);">$quaternion</span> ImagX] - [<span style="color: rgb(233, 98, 98);">$other</span> ImagX]) &lt; <span style="color: rgb(233, 98, 98);">$tolerance</span> &amp;&amp;
                  abs([<span style="color: rgb(233, 98, 98);">$quaternion</span> ImagY] - [<span style="color: rgb(233, 98, 98);">$other</span> ImagY]) &lt; <span style="color: rgb(233, 98, 98);">$tolerance</span> &amp;&amp;
                  abs([<span style="color: rgb(233, 98, 98);">$quaternion</span> ImagZ] - [<span style="color: rgb(233, 98, 98);">$other</span> ImagZ]) &lt; <span style="color: rgb(233, 98, 98);">$tolerance</span>
                }]
}</pre></div>
</div><h3 class='ruffproc'><a name='::tomato::mathquat::Pow'>Pow</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat" title="::tomato::mathquat" class='ruff_cmd'>::tomato::mathquat</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Raise the quaternion to a given power.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>Pow</span> <span class='ruff_arg'>q power</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><nobr><code>q</code></nobr></td><td>A quaternion component.</td></tr>
<tr><td><nobr><code>power</code></nobr></td><td>A double, integer or quaternion value.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns The quaternion <a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="Quaternion" class='ruff_cmd'>Quaternion</a> raised to a power of another quaternion</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Pow' href="javascript:toggleSource('tomato_mathquat_Pow')">Show source</a></p>
<div id='tomato_mathquat_Pow' class='ruff_dyn_src'><pre>proc ::tomato::mathquat::Pow {q power} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Raise the quaternion to a given power.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # q     - A quaternion component.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # power - A double, integer or quaternion value.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns The quaternion [Quaternion] raised to a power of another quaternion</span>
    if {[string is double -strict <span style="color: rgb(233, 98, 98);">$power</span>]} {

        if {[<span style="color: rgb(233, 98, 98);">$q</span> == <span style="color: rgb(233, 98, 98);">$::tomato::mathquat::Zero</span>]} {<span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> <span style="color: rgb(233, 98, 98);">$::tomato::mathquat::Zero</span>}
        if {[<span style="color: rgb(233, 98, 98);">$q</span> == <span style="color: rgb(233, 98, 98);">$::tomato::mathquat::One</span>]} {<span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> <span style="color: rgb(233, 98, 98);">$::tomato::mathquat::One</span>}

        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [[[<span style="color: rgb(233, 98, 98);">$q</span> Log] * <span style="color: rgb(233, 98, 98);">$power</span>] Exp]
    }

    if {[string is integer -strict <span style="color: rgb(233, 98, 98);">$power</span>]} {

        if {<span style="color: rgb(233, 98, 98);">$power</span> == 0} {<span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> <span style="color: rgb(233, 98, 98);">$::tomato::mathquat::One</span>}
        if {<span style="color: rgb(233, 98, 98);">$power</span> == 1} {<span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> <span style="color: rgb(233, 98, 98);">$q</span>}
        if {[<span style="color: rgb(233, 98, 98);">$q</span> == <span style="color: rgb(233, 98, 98);">$::tomato::mathquat::Zero</span>] || [<span style="color: rgb(233, 98, 98);">$q</span> == <span style="color: rgb(233, 98, 98);">$::tomato::mathquat::One</span>]} {<span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> <span style="color: rgb(233, 98, 98);">$q</span>}

        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> quat [tomato::mathquat::Quaternion new [<span style="color: rgb(233, 98, 98);">$q</span> Real] [<span style="color: rgb(233, 98, 98);">$q</span> ImagX] [<span style="color: rgb(233, 98, 98);">$q</span> ImagY] [<span style="color: rgb(233, 98, 98);">$q</span> ImagZ]]

        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [<span style="color: rgb(233, 98, 98);">$quat</span> * [tomato::mathquat::Pow <span style="color: rgb(233, 98, 98);">$quat</span> [expr {<span style="color: rgb(233, 98, 98);">$power</span> - 1}]]]

    }

    if {[tomato::helper::TypeOf <span style="color: rgb(233, 98, 98);">$power</span> Isa <span style="color: hsl(120, 71%, 16%);">&quot;Quaternion&quot;</span>]} {

        if {[<span style="color: rgb(233, 98, 98);">$q</span> == <span style="color: rgb(233, 98, 98);">$::tomato::mathquat::Zero</span>]} {<span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> <span style="color: rgb(233, 98, 98);">$::tomato::mathquat::Zero</span>}
        if {[<span style="color: rgb(233, 98, 98);">$q</span> == <span style="color: rgb(233, 98, 98);">$::tomato::mathquat::One</span>]} {<span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> <span style="color: rgb(233, 98, 98);">$::tomato::mathquat::One</span>}

        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [[<span style="color: rgb(233, 98, 98);">$power</span> * [<span style="color: rgb(233, 98, 98);">$q</span> Log]] Exp]

    }
}</pre></div>
</div><h3 class='ruffproc'><a name='::tomato::mathquat::Slerp'>Slerp</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat" title="::tomato::mathquat" class='ruff_cmd'>::tomato::mathquat</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Spherical Linear Interpolation between quaternions. Implemented as described in <a href="https://en.wikipedia.org/wiki/Slerp" >wiki/Slerp</a></p>
<div class='ruff_synopsis'><span class='ruff_cmd'>Slerp</span> <span class='ruff_arg'>q0 q1 ?arcposition?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><nobr><code>q0</code></nobr></td><td>First endpoint rotation as a Quaternion object.</td></tr>
<tr><td><nobr><code>q1</code></nobr></td><td>Second endpoint rotation as a Quaternion object.</td></tr>
<tr><td><nobr><code>arcposition</code></nobr></td><td>interpolation parameter between 0 and 1. This describes the linear placement position of <br> the result along the arc between endpoints; 0 being at <code>q0</code> and 1 being at <code>q1</code>. Optional, default <code>0.5</code>.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns A new Quaternion object representing the interpolated rotation</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_Slerp' href="javascript:toggleSource('tomato_mathquat_Slerp')">Show source</a></p>
<div id='tomato_mathquat_Slerp' class='ruff_dyn_src'><pre>proc ::tomato::mathquat::Slerp {q0 q1 {arcposition 0.5}} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Spherical Linear Interpolation between quaternions.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Implemented as described in [wiki/Slerp](https://en.wikipedia.org/wiki/Slerp)</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # q0          - First endpoint rotation as a Quaternion object.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # q1          - Second endpoint rotation as a Quaternion object.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # arcposition - interpolation parameter between 0 and 1. This describes the linear placement position of &lt;br&gt;</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #               the result along the arc between endpoints; 0 being at `q0` and 1 being at `q1`.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns A new Quaternion object representing the interpolated rotation</span>

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Ensure quaternion inputs are unit quaternions and 0 &lt;= amount &lt;=1</span>
    if {![<span style="color: rgb(233, 98, 98);">$q0</span> IsUnitQuaternion]} {
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> q0 [<span style="color: rgb(233, 98, 98);">$q0</span> Normalized]
    }

    if {![<span style="color: rgb(233, 98, 98);">$q1</span> IsUnitQuaternion]} {
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> q1 [<span style="color: rgb(233, 98, 98);">$q1</span> Normalized]
    }

    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> clamparcpos [tomato::helper::Clamp <span style="color: rgb(233, 98, 98);">$arcposition</span> 0 1]

    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> dot [tomato::mathquat::Dot <span style="color: rgb(233, 98, 98);">$q0</span> <span style="color: rgb(233, 98, 98);">$q1</span>]

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # If the dot product is negative, slerp won't take the shorter path.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Note that v1 and -v1 are equivalent when the negation is applied to all four components.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Fix by reversing one quaternion</span>
    if {<span style="color: rgb(233, 98, 98);">$dot</span> &lt; 0.0} {
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> q0  [<span style="color: rgb(233, 98, 98);">$q0</span> Negate]
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> dot [expr {Inv(<span style="color: rgb(233, 98, 98);">$dot</span>)}]
    }

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # sinalpha0 can not be zero</span>
    if {<span style="color: rgb(233, 98, 98);">$dot</span> &gt; 0.9995} {
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> q [<span style="color: rgb(233, 98, 98);">$q0</span> + [[<span style="color: rgb(233, 98, 98);">$q1</span> - <span style="color: rgb(233, 98, 98);">$q0</span>] * <span style="color: rgb(233, 98, 98);">$clamparcpos</span>]]
        if {![<span style="color: rgb(233, 98, 98);">$q</span> IsUnitQuaternion]} {
            <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> q [<span style="color: rgb(233, 98, 98);">$q</span> Normalized]
        }
        <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> <span style="color: rgb(233, 98, 98);">$q</span>
    }

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> alpha0    [expr {acos(<span style="color: rgb(233, 98, 98);">$dot</span>)}] ; # # Since dot is in range [0, 0.9995], acos() is safe</span>
    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> sinalpha0 [expr {sin(<span style="color: rgb(233, 98, 98);">$alpha0</span>)}]

    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> alpha [expr {<span style="color: rgb(233, 98, 98);">$alpha0</span> * <span style="color: rgb(233, 98, 98);">$clamparcpos</span>}]
    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> sinalpha [expr {sin(<span style="color: rgb(233, 98, 98);">$alpha</span>)}]

    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> s0 [expr {cos(<span style="color: rgb(233, 98, 98);">$alpha</span>) - ((<span style="color: rgb(233, 98, 98);">$dot</span> * <span style="color: rgb(233, 98, 98);">$sinalpha</span>) / double(<span style="color: rgb(233, 98, 98);">$sinalpha0</span>))}]
    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> s1 [expr {<span style="color: rgb(233, 98, 98);">$sinalpha</span> / double(<span style="color: rgb(233, 98, 98);">$sinalpha0</span>)}]

    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> q [[<span style="color: rgb(233, 98, 98);">$q0</span> * <span style="color: rgb(233, 98, 98);">$s0</span>] + [<span style="color: rgb(233, 98, 98);">$q1</span> * <span style="color: rgb(233, 98, 98);">$s1</span>]]

    if {![<span style="color: rgb(233, 98, 98);">$q</span> IsUnitQuaternion]} {
        <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> q [<span style="color: rgb(233, 98, 98);">$q</span> Normalized]
    }

    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> <span style="color: rgb(233, 98, 98);">$q</span>
}</pre></div>
</div><h3 class='ruffproc'><a name='::tomato::mathquat::ToNormSquared'>ToNormSquared</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat" title="::tomato::mathquat" class='ruff_cmd'>::tomato::mathquat</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Calculates norm of quaternion from it's algebraical notation</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>ToNormSquared</span> <span class='ruff_arg'>real imagX imagY imagZ</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><nobr><code>real</code></nobr></td><td>The rotation component of the Quaternion.</td></tr>
<tr><td><nobr><code>imagX</code></nobr></td><td>The X-value of the vector component of the Quaternion.</td></tr>
<tr><td><nobr><code>imagY</code></nobr></td><td>The Y-value of the vector component of the Quaternion.</td></tr>
<tr><td><nobr><code>imagZ</code></nobr></td><td>The Z-value of the vector component of the Quaternion.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns A norm squared quaternion</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_ToNormSquared' href="javascript:toggleSource('tomato_mathquat_ToNormSquared')">Show source</a></p>
<div id='tomato_mathquat_ToNormSquared' class='ruff_dyn_src'><pre>proc ::tomato::mathquat::ToNormSquared {real imagX imagY imagZ} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Calculates norm of quaternion from it's algebraical notation</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # real  - The rotation component of the Quaternion.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # imagX - The X-value of the vector component of the Quaternion.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # imagY - The Y-value of the vector component of the Quaternion.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # imagZ - The Z-value of the vector component of the Quaternion.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns A norm squared quaternion</span>
    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [expr {(<span style="color: rgb(233, 98, 98);">$imagX</span>**2) + (<span style="color: rgb(233, 98, 98);">$imagY</span>**2) + (<span style="color: rgb(233, 98, 98);">$imagZ</span>**2) + (<span style="color: rgb(233, 98, 98);">$real</span>**2)}]
}</pre></div>
</div><h3 class='ruffproc'><a name='::tomato::mathquat::ToUnitQuaternion'>ToUnitQuaternion</a><span class='ns_scope'> [<a href="tomato-tomato-mathquat.html#::tomato::mathquat" title="::tomato::mathquat" class='ruff_cmd'>::tomato::mathquat</a>]</span><span class='ruff-uplink'><a href='#top'>Top</a>, <a href='tomato.html'>Main</a>, <a href='tomato-docindex.html#'>Index</a></span></h3>
<div style='clear:both;'></div>
<p class='ruff'>Creates unit quaternion (it's norm == 1) from it's algebraical notation</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>ToUnitQuaternion</span> <span class='ruff_arg'>real imagX imagY imagZ</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td><nobr><code>real</code></nobr></td><td>The rotation component of the Quaternion.</td></tr>
<tr><td><nobr><code>imagX</code></nobr></td><td>The X-value of the vector component of the Quaternion.</td></tr>
<tr><td><nobr><code>imagY</code></nobr></td><td>The Y-value of the vector component of the Quaternion.</td></tr>
<tr><td><nobr><code>imagZ</code></nobr></td><td>The Z-value of the vector component of the Quaternion.</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns A unit quaternion <a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion" title="Quaternion" class='ruff_cmd'>Quaternion</a></p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_tomato_mathquat_ToUnitQuaternion' href="javascript:toggleSource('tomato_mathquat_ToUnitQuaternion')">Show source</a></p>
<div id='tomato_mathquat_ToUnitQuaternion' class='ruff_dyn_src'><pre>proc ::tomato::mathquat::ToUnitQuaternion {real imagX imagY imagZ} {

<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Creates unit quaternion (it's norm == 1) from it's algebraical notation</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # real  - The rotation component of the Quaternion.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # imagX - The X-value of the vector component of the Quaternion.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # imagY - The Y-value of the vector component of the Quaternion.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # imagZ - The Z-value of the vector component of the Quaternion.</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    #</span>
<span style="color: hsl(218, 8%, 43.5%);font-weight: 500;">    # Returns A unit quaternion [Quaternion]</span>
    <span style="color: hsl(206, 98.02%, 29.04%);font-weight: 550;">set</span> norm [expr {sqrt([tomato::mathquat::ToNormSquared <span style="color: rgb(233, 98, 98);">$real</span> <span style="color: rgb(233, 98, 98);">$imagX</span> <span style="color: rgb(233, 98, 98);">$imagY</span> <span style="color: rgb(233, 98, 98);">$imagZ</span>])}]

    <span style="color: rgba(8, 23, 241, 1);font-weight: 550;">return</span> [tomato::mathquat::Quaternion new [list [expr {<span style="color: rgb(233, 98, 98);">$real</span>  / double(<span style="color: rgb(233, 98, 98);">$norm</span>)}]  [expr {<span style="color: rgb(233, 98, 98);">$imagX</span> / double(<span style="color: rgb(233, 98, 98);">$norm</span>)}]  [expr {<span style="color: rgb(233, 98, 98);">$imagY</span> / double(<span style="color: rgb(233, 98, 98);">$norm</span>)}]  [expr {<span style="color: rgb(233, 98, 98);">$imagZ</span> / double(<span style="color: rgb(233, 98, 98);">$norm</span>)}]]]
}</pre></div>
</div></main><nav class='ruff-nav'><ul style='position: sticky; top: 0;'><li class='ruff-toc1'><a style='padding-top:2px;' href='tomato.html'>Start page</a></li>
<li class='ruff-toc1'><a href='tomato-docindex.html' accesskey='i'>Index</a></li>
<hr>
<li class='ruff-toc1'><a href='tomato-tomato-helper.html'>tomato::helper</a></li>
<li class='ruff-toc1'><a href='tomato-tomato-mathtriangle.html'>tomato::mathtriangle</a></li>
<li class='ruff-toc1'><a href='tomato-tomato-mathcsys.html'>tomato::mathcsys</a></li>
<li class='ruff-toc1'><a class='ruff-highlight' href='tomato-tomato-mathquat.html'>tomato::mathquat</a></li>
<li class='ruff-toc1'><a href='tomato-tomato-mathline3d.html'>tomato::mathline3d</a></li>
<li class='ruff-toc1'><a href='tomato-tomato-mathray3d.html'>tomato::mathray3d</a></li>
<li class='ruff-toc1'><a href='tomato-tomato-mathpt3d.html'>tomato::mathpt3d</a></li>
<li class='ruff-toc1'><a href='tomato-tomato-mathplane.html'>tomato::mathplane</a></li>
<li class='ruff-toc1'><a href='tomato-tomato-mathmatrix3d.html'>tomato::mathmatrix3d</a></li>
<li class='ruff-toc1'><a href='tomato-tomato-mathvec3d.html'>tomato::mathvec3d</a></li>
<li class='ruff-toc1'><a href='tomato-tomato-mathmatrix.html'>tomato::mathmatrix</a></li>
<hr><li class='ruff-toc2'><a href='#::tomato::mathquat-Classes'>Classes</a></li><li class='ruff-toc3'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion'>Quaternion</a></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::constructor'>constructor</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>Quaternion create OBJNAME</span> <span class='ruff_arg'>?args?</span>
<span class='ruff_cmd'>Quaternion new</span> <span class='ruff_arg'>?args?</span></pre>Initializes a new Quaternion Class.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::!='>!=</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ !=</span> <span class='ruff_arg'>obj ?tolerance?</span></pre>Inequality operator for two quaternions if <code>$obj</code> is quaternion component.<br> Inequality operator for quaternion and double if <code>$obj</code> is double.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::*'>*</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ *</span> <span class='ruff_arg'>obj</span></pre>Multiply a floating point number with a quaternion, if <code>$obj</code> is double.<br> Or multiply a quaternion with a quaternion, if <code>$obj</code> is an Quaternion object.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::+'>+</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ +</span> <span class='ruff_arg'>obj</span></pre>Add a floating point number to a quaternion, if <code>$obj</code> is double or add a quaternion to a quaternion, if <code>$obj</code> is an Quaternion object.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::-'>-</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ -</span> <span class='ruff_arg'>obj</span></pre>Subtract a floating point number from a quaternion, if <code>$obj</code> is double.<br> Or subtract a quaternion from a quaternion, if <code>$obj</code> is an Quaternion object.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::/'>/</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ /</span> <span class='ruff_arg'>obj</span></pre>Divide a quaternion by a floating point number, if <code>$obj</code> is double.<br> Or divide a quaternion by a quaternion, if <code>$obj</code> is an Quaternion object.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::=='>==</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ ==</span> <span class='ruff_arg'>obj ?tolerance?</span></pre>Equality operator for two quaternions if <code>$obj</code> is quaternion component.<br> Equality operator for quaternion and double if <code>$obj</code> is double.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::^'>^</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ ^</span> <span class='ruff_arg'>obj</span></pre>Raise a quaternion to a floating point number.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Angle'>Angle</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ Angle</span> </pre>Gets the angle (in radians) describing the magnitude of the quaternion rotation about it's rotation axis.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Arg'>Arg</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ Arg</span> </pre>Gets the argument <code>phi = arg(q)</code> of the quaternion <code>q</code>, such that <code>q = r*(cos(phi) + u*sin(phi)) = r*exp(phi*u)</code><br> where <code>r</code> is the absolute and <code>u</code> the unit vector of <code>q</code>.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Conjugate'>Conjugate</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ Conjugate</span> </pre>Conjugate this quaternion.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Distance'>Distance</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ Distance</span> <span class='ruff_arg'>q</span></pre>Gets the distance |a-b| of two quaternions, forming a metric space.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Exp'>Exp</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ Exp</span> </pre>Exponential Function.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Get'>Get</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ Get</span> </pre>Gets values from the Quaternion Class under Tcl list form.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::GetType'>GetType</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ GetType</span> </pre>Gets the name of class.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::ImagX'>ImagX</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ ImagX</span> </pre>Gets the imaginary X part (coefficient of complex I) of the quaternion.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::ImagY'>ImagY</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ ImagY</span> </pre>Gets the imaginary Y part (coefficient of complex J) of the quaternion.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::ImagZ'>ImagZ</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ ImagZ</span> </pre>Gets the imaginary Z part (coefficient of complex K) of the quaternion.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Inversed'>Inversed</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ Inversed</span> </pre>Gets an inverted quaternion. Inversing Zero returns Zero
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::IsInfinity'>IsInfinity</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ IsInfinity</span> </pre>Gets a value indicating whether the quaternion is not a number
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::IsNan'>IsNan</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ IsNan</span> </pre>Gets a value indicating whether the quaternion is not a number
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::IsUnitQuaternion'>IsUnitQuaternion</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ IsUnitQuaternion</span> </pre>Gets a value indicating whether the quaternion q has length |q| = 1. To normalize a quaternion to a length of 1, use the <a href="tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Normalized" title="Normalized" class='ruff_cmd'>Normalized</a> method. All unit quaternions form a 3-sphere.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Log'>Log</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ Log</span> <span class='ruff_arg'>?lbase?</span></pre>Logarithm to a given base.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Log10'>Log10</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ Log10</span> </pre>Common Logarithm to base 10.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Negate'>Negate</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ Negate</span> </pre>Negate a quaternion.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Norm'>Norm</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ Norm</span> </pre>Gets the norm of the quaternion q: square root of the sum of the squares of the four components.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Normalized'>Normalized</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ Normalized</span> </pre>Gets a new normalized Quaternion <code>q</code> with the direction of this quaternion.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::NormalizedVector'>NormalizedVector</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ NormalizedVector</span> </pre>Gets a new normalized Quaternion <code>u</code> with the Vector part only, such that <code>||u|| = 1</code>.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::NormSquared'>NormSquared</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ NormSquared</span> </pre>Gets the sum of the squares of the four components.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Real'>Real</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ Real</span> </pre>Gets the real part of the quaternion.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Rotate'>Rotate</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ Rotate</span> <span class='ruff_arg'>obj</span></pre>Rotate a 3D vector or 3D point by the rotation stored in the Quaternion object
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::RotateRotationQuaternion'>RotateRotationQuaternion</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ RotateRotationQuaternion</span> <span class='ruff_arg'>rotation</span></pre>Rotates the provided rotation quaternion with this quaternion.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::RotateUnitQuaternion'>RotateUnitQuaternion</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ RotateUnitQuaternion</span> <span class='ruff_arg'>unitQuaternion</span></pre>Rotates the provided unit quaternion with this quaternion.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Scalar'>Scalar</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ Scalar</span> </pre>Gets a new Quaternion <code>q</code> with the Scalar part only.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Sqrt'>Sqrt</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ Sqrt</span> </pre>Square root of the Quaternion: q^(1/2).
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::ToString'>ToString</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ ToString</span> </pre>Returns a string representation of this object.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::ToVector3D'>ToVector3D</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ ToVector3D</span> </pre>Gets the Vector part only.
</span></li><li class='ruff-toc4 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Quaternion::Vector'>Vector</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>QUATERNIONOBJ Vector</span> </pre>Gets a new Quaternion <code>q</code> with the Vector part only.
</span></li><li class='ruff-toc2'><a href='#::tomato::mathquat-Commands'>Commands</a></li><li class='ruff-toc3 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Dot'>Dot</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>Dot</span> <span class='ruff_arg'>q0 q1</span></pre>Dot Product between 2 quaternions
</span></li><li class='ruff-toc3 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Equals'>Equals</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>Equals</span> <span class='ruff_arg'>quaternion other tolerance</span></pre>Indicate if this quaternion is equivalent to a given quaternion
</span></li><li class='ruff-toc3 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Pow'>Pow</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>Pow</span> <span class='ruff_arg'>q power</span></pre>Raise the quaternion to a given power.
</span></li><li class='ruff-toc3 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::Slerp'>Slerp</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>Slerp</span> <span class='ruff_arg'>q0 q1 ?arcposition?</span></pre>Spherical Linear Interpolation between quaternions. Implemented as described in <a href="https://en.wikipedia.org/wiki/Slerp" >wiki/Slerp</a>
</span></li><li class='ruff-toc3 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::ToNormSquared'>ToNormSquared</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>ToNormSquared</span> <span class='ruff_arg'>real imagX imagY imagZ</span></pre>Calculates norm of quaternion from it's algebraical notation
</span></li><li class='ruff-toc3 ruff-tip'><a href='tomato-tomato-mathquat.html#::tomato::mathquat::ToUnitQuaternion'>ToUnitQuaternion</a><span class='ruff-tiptext'><pre><span class='ruff_cmd'>ToUnitQuaternion</span> <span class='ruff_arg'>real imagX imagY imagZ</span></pre>Creates unit quaternion (it's norm == 1) from it's algebraical notation
</span></li></ul></nav><footer class='ruff-layout-footer ruff-ft'><div style='float: right;'>Document generated by <a href='https://ruff.magicsplat.com'>Ruff!</a></div></footer>
</div></body></html>

